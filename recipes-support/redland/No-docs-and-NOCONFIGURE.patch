From 60d103155b0ef92e746b68aeadba05cb37e61d38 Mon Sep 17 00:00:00 2001
From: Samuel Stirtzel <s.stirtzel@googlemail.com>
Date: Tue, 14 Feb 2012 12:52:36 +0100
Subject: [PATCH] No-docs and NOCONFIGURE Signed-off-by: Samuel Stirtzel
 <s.stirtzel@googlemail.com>

---
 autogen.sh   |   49 +++++++++++++++++++++++++------------------------
 configure.ac |    8 ++++----
 2 files changed, 29 insertions(+), 28 deletions(-)

diff --git a/autogen.sh b/autogen.sh
index 47b293b..5cae1c8 100755
--- a/autogen.sh
+++ b/autogen.sh
@@ -50,11 +50,11 @@ GITMODULES='.gitmodules'
 programs="automake aclocal autoconf autoheader libtoolize"
 confs=`find . -name configure.ac -print | grep -v /releases/`
 
-gtkdoc_args=
-if grep "^GTK_DOC_CHECK" $confs >/dev/null; then
-  programs="$programs gtkdocize"
-  gtkdoc_args="--enable-gtk-doc"
-fi
+#gtkdoc_args=
+#if grep "^GTK_DOC_CHECK" $confs >/dev/null; then
+#  programs="$programs gtkdocize"
+#  gtkdoc_args="--enable-gtk-doc"
+#fi
 if grep "^AC_CHECK_PROGS.SWIG" $confs >/dev/null; then
   programs="$programs swig"
 fi
@@ -361,25 +361,26 @@ do
   fi
 done
 
+if "X$NOCONFIGURE" != X; then
+  rm -f config.cache
 
-rm -f config.cache
-
-AUTOMAKE=$automake
-AUTOCONF=$autoconf
-ACLOCAL=$aclocal
-export AUTOMAKE AUTOCONF ACLOCAL
+  AUTOMAKE=$automake
+  AUTOCONF=$autoconf
+  ACLOCAL=$aclocal
+  export AUTOMAKE AUTOCONF ACLOCAL
 
-echo " "
-if test -z "$*"; then
-  echo "$program: WARNING: Running \`configure' with no arguments."
-  echo "If you wish to pass any to it, please specify them on the"
-  echo "\`$program' command line."
-fi
+  echo " "
+  if test -z "$*"; then
+    echo "$program: WARNING: Running \`configure' with no arguments."
+    echo "If you wish to pass any to it, please specify them on the"
+    echo "\`$program' command line."
+  fi
 
-echo "$program: Running ./configure $configure_args $@"
-if test "X$DRYRUN" = X; then
-  $DRYRUN ./configure $configure_args "$@" \
-  && echo "$program: Now type \`make' to compile this package" || exit 1
-else
-  $DRYRUN ./configure $configure_args "$@"
-fi
+  echo "$program: Running ./configure $configure_args $@"
+  if test "X$DRYRUN" = X; then
+    $DRYRUN ./configure $configure_args "$@" \
+    && echo "$program: Now type \`make' to compile this package" || exit 1
+  else
+    $DRYRUN ./configure $configure_args "$@"
+  fi
+fi
\ No newline at end of file
diff --git a/configure.ac b/configure.ac
index e548387..4e9cd26 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1314,8 +1314,8 @@ AM_SILENT_RULES([no])
 
 AC_CONFIG_FILES([Makefile
 redland.rdf
-docs/Makefile
-docs/version.xml
+#docs/Makefile
+#docs/version.xml
 examples/Makefile
 scripts/Makefile
 src/Makefile
@@ -1330,8 +1330,8 @@ redland.pc])
 AC_CONFIG_FILES([redland-config], [chmod +x redland-config])
 AC_CONFIG_FILES([redland-src-config], [chmod +x redland-src-config])
 
-dnl Check for gtk-doc and docbook
-GTK_DOC_CHECK([1.3])
+#dnl Check for gtk-doc and docbook
+
 
 AC_OUTPUT
 
-- 
1.7.5.4

