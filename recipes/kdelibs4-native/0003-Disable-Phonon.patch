From 29919035ff6f1839da0a840194dd77597050f743 Mon Sep 17 00:00:00 2001
From: Samuel Stirtzel <s.stirtzel@googlemail.com>
Date: Thu, 26 Jan 2012 15:06:11 +0100
Subject: [PATCH] Disable Phonon. Signed-off-by: Samuel Stirtzel
 <s.stirtzel@googlemail.com>

---
 cmake/modules/FindKDE4Internal.cmake |   21 +++++++++++----------
 1 files changed, 11 insertions(+), 10 deletions(-)

diff --git a/cmake/modules/FindKDE4Internal.cmake b/cmake/modules/FindKDE4Internal.cmake
index 84df6f5..0b137fb 100644
--- a/cmake/modules/FindKDE4Internal.cmake
+++ b/cmake/modules/FindKDE4Internal.cmake
@@ -702,16 +702,17 @@ endif(_kdeBootStrapping  OR  TARGET ${KDE4_TARGET_PREFIX}nepomuk)
 # which helps with finding the phonon installed as part of kdesupport:
 
 # only make Phonon REQUIRED if KDE4 itself is REQUIRED
-find_package(Phonon 4.3.80 ${_REQ_STRING_KDE4})
-set(KDE4_PHONON_LIBRARY ${PHONON_LIBRARY})
-set(KDE4_PHONON_LIBS ${PHONON_LIBS})
-set(KDE4_PHONON_INCLUDES ${PHONON_INCLUDES})
-
-if(NOT PHONON_FOUND)
-   message(STATUS "KDE4 not found, because Phonon was not found")
-   return()
-endif(NOT PHONON_FOUND)
-
+if (NOT OPENEMBEDDED)
+  find_package(Phonon 4.3.80 ${_REQ_STRING_KDE4})
+  set(KDE4_PHONON_LIBRARY ${PHONON_LIBRARY})
+  set(KDE4_PHONON_LIBS ${PHONON_LIBS})
+  set(KDE4_PHONON_INCLUDES ${PHONON_INCLUDES})
+
+  if(NOT PHONON_FOUND)
+    message(STATUS "KDE4 not found, because Phonon was not found")
+    return()
+  endif(NOT PHONON_FOUND)
+endif (NOT OPENEMBEDDED)
 
 #####################  provide some options   ##########################################
 
-- 
1.7.5.4

